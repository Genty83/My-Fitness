{% extends 'base.html' %}
{% load viewcomponent_tags %}

{% block title %}
<title>My Fitness - Checkout</title>
{% endblock %}

{% block content %}
<div class="container grid gap-1 width-80 breakpoint-lg margin-auto pad-2">
  <h1>Checkout</h1>
  <hr>
  <div class="container width-80 breakpoint-lg margin-out">
    <div class="row">
      <div class="col-span-5 breakpoint-lg grid gap-1">
        <p>Please fill out the form below to complete your order</p>
        <form class="grid width-100 gap-2 bg-slate-800 bd-radius-1 pad-2" action="{% url 'checkout' %}" method="post" id="payment-form">
          {% csrf_token %}
          <fieldset class="bd-width-1 bd-slate-600 bd-solid pad-3 flex-col gap-2 width-100 bd-radius-1">
            <legend class="pad-inline-2">Details</legend>
            {{ order_form.full_name }}
            {{ order_form.email }}
          </fieldset>
          <fieldset class="bd-width-1 bd-slate-600 bd-solid pad-3 flex-col gap-2 width-100 bd-radius-1">
            <legend class="pad-inline-2">Delivery</legend>
            {{ order_form.phone_number }}
            {{ order_form.country }}
            {{ order_form.postcode }}
            {{ order_form.postcode }}
            {{ order_form.street_address1 }}
            {{ order_form.street_address2 }}
            {{ order_form.county }}
            {% if user.is_authenticated %}
              <label for="id_save_info">Save this delivery information to my profile</label>
              <input class="bg-slate-600 bd-radius-1" type="checkbox" name="id_save_info" id="id_save_info">
            {% else %}
            <label for="id_save_info">
              <a class="ft-sky-300" href="{% url 'account_signup' %}">Create an account</a> or 
              <a class="ft-sky-300" href="{% url 'account_login' %}">Login</a> to save this information
            </label>
            {% endif %}
          </fieldset>
          <fieldset class="bd-width-1 bd-slate-600 bd-solid pad-3 flex-col gap-2 width-100 bd-radius-1">
            <legend class="pad-inline-2">Payment</legend>
            <!-- Stripe card element -->
            <div>

            </div>
            <!-- Used to display form errors -->
            <div id="card-errors" role="alert">

            </div>
          </fieldset>
          <div class="flex-row gap-2">
            <a class="btn btn-md bg-sky-400 ft-slate-900 bd-radius-1 bd-width-0" href="{% url 'bag' %}">
              <i class="fas fa-chevron-left"></i>
              Adjust Bag
            </a>
            <button class="btn btn-md bg-sky-400 ft-slate-900 bd-radius-1 bd-width-0" type="submit">
              <i class="fas fa-lock"></i>
              Complete Order
            </button>
          </div>
          <p>
            <span>
              <i class="fas fa-exclamation-circle"></i>
            </span>
            <span>
              Your card will be charged <strong>Â£{{grand_total|floatformat:2}}</strong>
            </span>
          </p>
        </form>
      </div>
      <div class="col-span-7 breakpoint-lg">

      </div>
    </div>
  </div>
</div>
{% endblock %}